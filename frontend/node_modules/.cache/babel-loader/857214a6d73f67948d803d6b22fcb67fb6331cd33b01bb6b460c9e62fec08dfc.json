{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\OneDrive\\\\Desktop\\\\DACS_Travel_PhuYen\\\\frontend\\\\src\\\\components\\\\admin\\\\Location\\\\EditLocationModal.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport LocationForm from './LocationForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditLocationModal = ({\n  show,\n  onClose,\n  formData,\n  setFormData,\n  selectedLocation,\n  onSubmit\n}) => {\n  _s();\n  useEffect(() => {\n    if (selectedLocation) {\n      var _selectedLocation$coo, _selectedLocation$coo2, _selectedLocation$int, _selectedLocation$why, _selectedLocation$why2, _selectedLocation$why3, _selectedLocation$why4, _selectedLocation$why5, _selectedLocation$tra, _selectedLocation$tra2, _selectedLocation$tra3, _selectedLocation$tra4, _selectedLocation$int2, _selectedLocation$why6, _selectedLocation$why7;\n      // Create a complete form data object from the selected location\n      const formDataObj = {\n        name: selectedLocation.title || '',\n        type: selectedLocation.type || '',\n        description: selectedLocation.description || '',\n        latitude: ((_selectedLocation$coo = selectedLocation.coordinates) === null || _selectedLocation$coo === void 0 ? void 0 : _selectedLocation$coo.latitude) || '',\n        longitude: ((_selectedLocation$coo2 = selectedLocation.coordinates) === null || _selectedLocation$coo2 === void 0 ? void 0 : _selectedLocation$coo2.longitude) || '',\n        subtitle: selectedLocation.subtitle || '',\n        introduction: ((_selectedLocation$int = selectedLocation.introduction) === null || _selectedLocation$int === void 0 ? void 0 : _selectedLocation$int.text) || '',\n        why_visit_architecture_title: ((_selectedLocation$why = selectedLocation.whyVisit) === null || _selectedLocation$why === void 0 ? void 0 : (_selectedLocation$why2 = _selectedLocation$why.architecture) === null || _selectedLocation$why2 === void 0 ? void 0 : _selectedLocation$why2.title) || '',\n        why_visit_architecture_text: ((_selectedLocation$why3 = selectedLocation.whyVisit) === null || _selectedLocation$why3 === void 0 ? void 0 : (_selectedLocation$why4 = _selectedLocation$why3.architecture) === null || _selectedLocation$why4 === void 0 ? void 0 : _selectedLocation$why4.text) || '',\n        why_visit_culture: ((_selectedLocation$why5 = selectedLocation.whyVisit) === null || _selectedLocation$why5 === void 0 ? void 0 : _selectedLocation$why5.culture) || '',\n        ticket_price: ((_selectedLocation$tra = selectedLocation.travelInfo) === null || _selectedLocation$tra === void 0 ? void 0 : _selectedLocation$tra.ticketPrice) || '',\n        tip: ((_selectedLocation$tra2 = selectedLocation.travelInfo) === null || _selectedLocation$tra2 === void 0 ? void 0 : _selectedLocation$tra2.tip) || '',\n        // Handle arrays with proper fallback to empty arrays\n        bestTimes: Array.isArray(selectedLocation.bestTimes) && selectedLocation.bestTimes.length > 0 ? selectedLocation.bestTimes : [''],\n        // Handle travel methods object with proper structure\n        travelMethods: {\n          fromTuyHoa: Array.isArray((_selectedLocation$tra3 = selectedLocation.travelMethods) === null || _selectedLocation$tra3 === void 0 ? void 0 : _selectedLocation$tra3.fromTuyHoa) && selectedLocation.travelMethods.fromTuyHoa.length > 0 ? selectedLocation.travelMethods.fromTuyHoa : [''],\n          fromElsewhere: Array.isArray((_selectedLocation$tra4 = selectedLocation.travelMethods) === null || _selectedLocation$tra4 === void 0 ? void 0 : _selectedLocation$tra4.fromElsewhere) && selectedLocation.travelMethods.fromElsewhere.length > 0 ? selectedLocation.travelMethods.fromElsewhere : ['']\n        },\n        // Handle experiences array with proper image URL retention\n        experiences: Array.isArray(selectedLocation.experiences) && selectedLocation.experiences.length > 0 ? selectedLocation.experiences.map(exp => ({\n          text: exp.text || '',\n          image: null,\n          // New image file will be set here if user uploads one\n          imageUrl: exp.image // Store the existing image URL\n        })) : [{\n          text: '',\n          image: null\n        }],\n        // Handle cuisines array with proper image URL retention\n        cuisines: Array.isArray(selectedLocation.cuisine) && selectedLocation.cuisine.length > 0 ? selectedLocation.cuisine.map(cuisine => ({\n          text: cuisine.text || '',\n          image: null,\n          // New image file will be set here if user uploads one\n          imageUrl: cuisine.image // Store the existing image URL\n        })) : [{\n          text: '',\n          image: null\n        }],\n        // Tips array with fallback\n        tips: Array.isArray(selectedLocation.tips) && selectedLocation.tips.length > 0 ? selectedLocation.tips : [''],\n        // Nearby locations array with fallback\n        nearby: Array.isArray(selectedLocation.nearby) && selectedLocation.nearby.length > 0 ? selectedLocation.nearby.map(location => location.id || location) : [],\n        // Image placeholders - will be filled with File objects if user uploads new images\n        images: {\n          introduction: null,\n          architecture: null\n        },\n        // Store original image URLs for reference\n        originalImages: {\n          introduction: ((_selectedLocation$int2 = selectedLocation.introduction) === null || _selectedLocation$int2 === void 0 ? void 0 : _selectedLocation$int2.image) || null,\n          architecture: ((_selectedLocation$why6 = selectedLocation.whyVisit) === null || _selectedLocation$why6 === void 0 ? void 0 : (_selectedLocation$why7 = _selectedLocation$why6.architecture) === null || _selectedLocation$why7 === void 0 ? void 0 : _selectedLocation$why7.image) || null\n        }\n      };\n\n      // Set the form data\n      setFormData(formDataObj);\n    }\n  }, [selectedLocation, setFormData]);\n  if (!show) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"modal-title\",\n        children: \"Ch\\u1EC9nh s\\u1EEDa \\u0111\\u1ECBa \\u0111i\\u1EC3m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LocationForm, {\n        formData: formData,\n        setFormData: setFormData,\n        onSubmit: onSubmit,\n        onCancel: onClose,\n        selectedLocation: selectedLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(EditLocationModal, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = EditLocationModal;\nexport default EditLocationModal;\nvar _c;\n$RefreshReg$(_c, \"EditLocationModal\");","map":{"version":3,"names":["React","useEffect","LocationForm","jsxDEV","_jsxDEV","EditLocationModal","show","onClose","formData","setFormData","selectedLocation","onSubmit","_s","_selectedLocation$coo","_selectedLocation$coo2","_selectedLocation$int","_selectedLocation$why","_selectedLocation$why2","_selectedLocation$why3","_selectedLocation$why4","_selectedLocation$why5","_selectedLocation$tra","_selectedLocation$tra2","_selectedLocation$tra3","_selectedLocation$tra4","_selectedLocation$int2","_selectedLocation$why6","_selectedLocation$why7","formDataObj","name","title","type","description","latitude","coordinates","longitude","subtitle","introduction","text","why_visit_architecture_title","whyVisit","architecture","why_visit_architecture_text","why_visit_culture","culture","ticket_price","travelInfo","ticketPrice","tip","bestTimes","Array","isArray","length","travelMethods","fromTuyHoa","fromElsewhere","experiences","map","exp","image","imageUrl","cuisines","cuisine","tips","nearby","location","id","images","originalImages","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onCancel","_c","$RefreshReg$"],"sources":["C:/Users/admin/OneDrive/Desktop/DACS_Travel_PhuYen/frontend/src/components/admin/Location/EditLocationModal.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport LocationForm from './LocationForm';\n\nconst EditLocationModal = ({ show, onClose, formData, setFormData, selectedLocation, onSubmit }) => {\n  useEffect(() => {\n    if (selectedLocation) {\n      // Create a complete form data object from the selected location\n      const formDataObj = {\n        name: selectedLocation.title || '',\n        type: selectedLocation.type || '',\n        description: selectedLocation.description || '',\n        latitude: selectedLocation.coordinates?.latitude || '',\n        longitude: selectedLocation.coordinates?.longitude || '',\n        subtitle: selectedLocation.subtitle || '',\n        introduction: selectedLocation.introduction?.text || '',\n        why_visit_architecture_title: selectedLocation.whyVisit?.architecture?.title || '',\n        why_visit_architecture_text: selectedLocation.whyVisit?.architecture?.text || '',\n        why_visit_culture: selectedLocation.whyVisit?.culture || '',\n        ticket_price: selectedLocation.travelInfo?.ticketPrice || '',\n        tip: selectedLocation.travelInfo?.tip || '',\n        \n        // Handle arrays with proper fallback to empty arrays\n        bestTimes: Array.isArray(selectedLocation.bestTimes) && selectedLocation.bestTimes.length > 0 \n          ? selectedLocation.bestTimes \n          : [''],\n        \n        // Handle travel methods object with proper structure\n        travelMethods: {\n          fromTuyHoa: Array.isArray(selectedLocation.travelMethods?.fromTuyHoa) && \n                      selectedLocation.travelMethods.fromTuyHoa.length > 0\n            ? selectedLocation.travelMethods.fromTuyHoa \n            : [''],\n          fromElsewhere: Array.isArray(selectedLocation.travelMethods?.fromElsewhere) && \n                        selectedLocation.travelMethods.fromElsewhere.length > 0\n            ? selectedLocation.travelMethods.fromElsewhere \n            : ['']\n        },\n        \n        // Handle experiences array with proper image URL retention\n        experiences: Array.isArray(selectedLocation.experiences) && selectedLocation.experiences.length > 0\n          ? selectedLocation.experiences.map(exp => ({\n              text: exp.text || '',\n              image: null, // New image file will be set here if user uploads one\n              imageUrl: exp.image // Store the existing image URL\n            }))\n          : [{ text: '', image: null }],\n        \n        // Handle cuisines array with proper image URL retention\n        cuisines: Array.isArray(selectedLocation.cuisine) && selectedLocation.cuisine.length > 0\n          ? selectedLocation.cuisine.map(cuisine => ({\n              text: cuisine.text || '',\n              image: null, // New image file will be set here if user uploads one\n              imageUrl: cuisine.image // Store the existing image URL\n            }))\n          : [{ text: '', image: null }],\n        \n        // Tips array with fallback\n        tips: Array.isArray(selectedLocation.tips) && selectedLocation.tips.length > 0\n          ? selectedLocation.tips \n          : [''],\n        \n        // Nearby locations array with fallback\n        nearby: Array.isArray(selectedLocation.nearby) && selectedLocation.nearby.length > 0\n          ? selectedLocation.nearby.map(location => location.id || location) \n          : [],\n        \n        // Image placeholders - will be filled with File objects if user uploads new images\n        images: {\n          introduction: null,\n          architecture: null\n        },\n        \n        // Store original image URLs for reference\n        originalImages: {\n          introduction: selectedLocation.introduction?.image || null,\n          architecture: selectedLocation.whyVisit?.architecture?.image || null\n        }\n      };\n      \n      // Set the form data\n      setFormData(formDataObj);\n    }\n  }, [selectedLocation, setFormData]);\n\n  if (!show) return null;\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal-content\">\n        <h2 className=\"modal-title\">Chỉnh sửa địa điểm</h2>\n        <LocationForm\n          formData={formData}\n          setFormData={setFormData}\n          onSubmit={onSubmit}\n          onCancel={onClose}\n          selectedLocation={selectedLocation}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default EditLocationModal;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,YAAY,MAAM,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1C,MAAMC,iBAAiB,GAAGA,CAAC;EAAEC,IAAI;EAAEC,OAAO;EAAEC,QAAQ;EAAEC,WAAW;EAAEC,gBAAgB;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAClGX,SAAS,CAAC,MAAM;IACd,IAAIS,gBAAgB,EAAE;MAAA,IAAAG,qBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;MACpB;MACA,MAAMC,WAAW,GAAG;QAClBC,IAAI,EAAEnB,gBAAgB,CAACoB,KAAK,IAAI,EAAE;QAClCC,IAAI,EAAErB,gBAAgB,CAACqB,IAAI,IAAI,EAAE;QACjCC,WAAW,EAAEtB,gBAAgB,CAACsB,WAAW,IAAI,EAAE;QAC/CC,QAAQ,EAAE,EAAApB,qBAAA,GAAAH,gBAAgB,CAACwB,WAAW,cAAArB,qBAAA,uBAA5BA,qBAAA,CAA8BoB,QAAQ,KAAI,EAAE;QACtDE,SAAS,EAAE,EAAArB,sBAAA,GAAAJ,gBAAgB,CAACwB,WAAW,cAAApB,sBAAA,uBAA5BA,sBAAA,CAA8BqB,SAAS,KAAI,EAAE;QACxDC,QAAQ,EAAE1B,gBAAgB,CAAC0B,QAAQ,IAAI,EAAE;QACzCC,YAAY,EAAE,EAAAtB,qBAAA,GAAAL,gBAAgB,CAAC2B,YAAY,cAAAtB,qBAAA,uBAA7BA,qBAAA,CAA+BuB,IAAI,KAAI,EAAE;QACvDC,4BAA4B,EAAE,EAAAvB,qBAAA,GAAAN,gBAAgB,CAAC8B,QAAQ,cAAAxB,qBAAA,wBAAAC,sBAAA,GAAzBD,qBAAA,CAA2ByB,YAAY,cAAAxB,sBAAA,uBAAvCA,sBAAA,CAAyCa,KAAK,KAAI,EAAE;QAClFY,2BAA2B,EAAE,EAAAxB,sBAAA,GAAAR,gBAAgB,CAAC8B,QAAQ,cAAAtB,sBAAA,wBAAAC,sBAAA,GAAzBD,sBAAA,CAA2BuB,YAAY,cAAAtB,sBAAA,uBAAvCA,sBAAA,CAAyCmB,IAAI,KAAI,EAAE;QAChFK,iBAAiB,EAAE,EAAAvB,sBAAA,GAAAV,gBAAgB,CAAC8B,QAAQ,cAAApB,sBAAA,uBAAzBA,sBAAA,CAA2BwB,OAAO,KAAI,EAAE;QAC3DC,YAAY,EAAE,EAAAxB,qBAAA,GAAAX,gBAAgB,CAACoC,UAAU,cAAAzB,qBAAA,uBAA3BA,qBAAA,CAA6B0B,WAAW,KAAI,EAAE;QAC5DC,GAAG,EAAE,EAAA1B,sBAAA,GAAAZ,gBAAgB,CAACoC,UAAU,cAAAxB,sBAAA,uBAA3BA,sBAAA,CAA6B0B,GAAG,KAAI,EAAE;QAE3C;QACAC,SAAS,EAAEC,KAAK,CAACC,OAAO,CAACzC,gBAAgB,CAACuC,SAAS,CAAC,IAAIvC,gBAAgB,CAACuC,SAAS,CAACG,MAAM,GAAG,CAAC,GACzF1C,gBAAgB,CAACuC,SAAS,GAC1B,CAAC,EAAE,CAAC;QAER;QACAI,aAAa,EAAE;UACbC,UAAU,EAAEJ,KAAK,CAACC,OAAO,EAAA5B,sBAAA,GAACb,gBAAgB,CAAC2C,aAAa,cAAA9B,sBAAA,uBAA9BA,sBAAA,CAAgC+B,UAAU,CAAC,IACzD5C,gBAAgB,CAAC2C,aAAa,CAACC,UAAU,CAACF,MAAM,GAAG,CAAC,GAC5D1C,gBAAgB,CAAC2C,aAAa,CAACC,UAAU,GACzC,CAAC,EAAE,CAAC;UACRC,aAAa,EAAEL,KAAK,CAACC,OAAO,EAAA3B,sBAAA,GAACd,gBAAgB,CAAC2C,aAAa,cAAA7B,sBAAA,uBAA9BA,sBAAA,CAAgC+B,aAAa,CAAC,IAC7D7C,gBAAgB,CAAC2C,aAAa,CAACE,aAAa,CAACH,MAAM,GAAG,CAAC,GACjE1C,gBAAgB,CAAC2C,aAAa,CAACE,aAAa,GAC5C,CAAC,EAAE;QACT,CAAC;QAED;QACAC,WAAW,EAAEN,KAAK,CAACC,OAAO,CAACzC,gBAAgB,CAAC8C,WAAW,CAAC,IAAI9C,gBAAgB,CAAC8C,WAAW,CAACJ,MAAM,GAAG,CAAC,GAC/F1C,gBAAgB,CAAC8C,WAAW,CAACC,GAAG,CAACC,GAAG,KAAK;UACvCpB,IAAI,EAAEoB,GAAG,CAACpB,IAAI,IAAI,EAAE;UACpBqB,KAAK,EAAE,IAAI;UAAE;UACbC,QAAQ,EAAEF,GAAG,CAACC,KAAK,CAAC;QACtB,CAAC,CAAC,CAAC,GACH,CAAC;UAAErB,IAAI,EAAE,EAAE;UAAEqB,KAAK,EAAE;QAAK,CAAC,CAAC;QAE/B;QACAE,QAAQ,EAAEX,KAAK,CAACC,OAAO,CAACzC,gBAAgB,CAACoD,OAAO,CAAC,IAAIpD,gBAAgB,CAACoD,OAAO,CAACV,MAAM,GAAG,CAAC,GACpF1C,gBAAgB,CAACoD,OAAO,CAACL,GAAG,CAACK,OAAO,KAAK;UACvCxB,IAAI,EAAEwB,OAAO,CAACxB,IAAI,IAAI,EAAE;UACxBqB,KAAK,EAAE,IAAI;UAAE;UACbC,QAAQ,EAAEE,OAAO,CAACH,KAAK,CAAC;QAC1B,CAAC,CAAC,CAAC,GACH,CAAC;UAAErB,IAAI,EAAE,EAAE;UAAEqB,KAAK,EAAE;QAAK,CAAC,CAAC;QAE/B;QACAI,IAAI,EAAEb,KAAK,CAACC,OAAO,CAACzC,gBAAgB,CAACqD,IAAI,CAAC,IAAIrD,gBAAgB,CAACqD,IAAI,CAACX,MAAM,GAAG,CAAC,GAC1E1C,gBAAgB,CAACqD,IAAI,GACrB,CAAC,EAAE,CAAC;QAER;QACAC,MAAM,EAAEd,KAAK,CAACC,OAAO,CAACzC,gBAAgB,CAACsD,MAAM,CAAC,IAAItD,gBAAgB,CAACsD,MAAM,CAACZ,MAAM,GAAG,CAAC,GAChF1C,gBAAgB,CAACsD,MAAM,CAACP,GAAG,CAACQ,QAAQ,IAAIA,QAAQ,CAACC,EAAE,IAAID,QAAQ,CAAC,GAChE,EAAE;QAEN;QACAE,MAAM,EAAE;UACN9B,YAAY,EAAE,IAAI;UAClBI,YAAY,EAAE;QAChB,CAAC;QAED;QACA2B,cAAc,EAAE;UACd/B,YAAY,EAAE,EAAAZ,sBAAA,GAAAf,gBAAgB,CAAC2B,YAAY,cAAAZ,sBAAA,uBAA7BA,sBAAA,CAA+BkC,KAAK,KAAI,IAAI;UAC1DlB,YAAY,EAAE,EAAAf,sBAAA,GAAAhB,gBAAgB,CAAC8B,QAAQ,cAAAd,sBAAA,wBAAAC,sBAAA,GAAzBD,sBAAA,CAA2Be,YAAY,cAAAd,sBAAA,uBAAvCA,sBAAA,CAAyCgC,KAAK,KAAI;QAClE;MACF,CAAC;;MAED;MACAlD,WAAW,CAACmB,WAAW,CAAC;IAC1B;EACF,CAAC,EAAE,CAAClB,gBAAgB,EAAED,WAAW,CAAC,CAAC;EAEnC,IAAI,CAACH,IAAI,EAAE,OAAO,IAAI;EAEtB,oBACEF,OAAA;IAAKiE,SAAS,EAAC,eAAe;IAAAC,QAAA,eAC5BlE,OAAA;MAAKiE,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC5BlE,OAAA;QAAIiE,SAAS,EAAC,aAAa;QAAAC,QAAA,EAAC;MAAkB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnDtE,OAAA,CAACF,YAAY;QACXM,QAAQ,EAAEA,QAAS;QACnBC,WAAW,EAAEA,WAAY;QACzBE,QAAQ,EAAEA,QAAS;QACnBgE,QAAQ,EAAEpE,OAAQ;QAClBG,gBAAgB,EAAEA;MAAiB;QAAA6D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC9D,EAAA,CAjGIP,iBAAiB;AAAAuE,EAAA,GAAjBvE,iBAAiB;AAmGvB,eAAeA,iBAAiB;AAAC,IAAAuE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}