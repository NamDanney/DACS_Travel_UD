{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\OneDrive\\\\Desktop\\\\DACS_Travel_PhuYen\\\\frontend\\\\src\\\\components\\\\LocationDetail\\\\CommentsSection.js\";\nimport PropTypes from \"prop-types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentsSection = ({\n  comments,\n  setComments,\n  newComment,\n  setNewComment,\n  locationId\n}) => {\n  const handleCommentSubmit = async e => {\n    e.preventDefault();\n    if (newComment.trim()) {\n      try {\n        const response = await fetch(`http://localhost:5000/api/locations/${locationId}/comments`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          },\n          body: JSON.stringify({\n            commentText: newComment\n          })\n        });\n        if (response.ok) {\n          const newCommentData = await response.json();\n          setComments([...comments, {\n            id: Date.now(),\n            text: newComment,\n            username: 'Bạn',\n            // Tạm thời hiển thị \"Bạn\" cho bình luận mới\n            date: new Date().toLocaleString()\n          }]);\n          setNewComment('');\n        } else {\n          console.error('Failed to add comment');\n        }\n      } catch (error) {\n        console.error('Error submitting comment:', error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    id: \"comments\",\n    className: \"comments\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"B\\xECnh Lu\\u1EADn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleCommentSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: \"4\",\n        placeholder: \"Vi\\u1EBFt b\\xECnh lu\\u1EADn c\\u1EE7a b\\u1EA1n...\",\n        value: newComment,\n        onChange: e => setNewComment(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"G\\u1EEDi B\\xECnh Lu\\u1EADn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-list\",\n      children: comments.length > 0 ? comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: comment.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 18\n          }, this), \": \", comment.text]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u0110\\u0103ng v\\xE0o: \", comment.date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 15\n        }, this)]\n      }, comment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ch\\u01B0a c\\xF3 b\\xECnh lu\\u1EADn n\\xE0o. H\\xE3y l\\xE0 ng\\u01B0\\u1EDDi \\u0111\\u1EA7u ti\\xEAn b\\xECnh lu\\u1EADn!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_c = CommentsSection;\nCommentsSection.propTypes = {\n  comments: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    text: PropTypes.string.isRequired,\n    username: PropTypes.string.isRequired,\n    date: PropTypes.string.isRequired\n  })).isRequired,\n  setComments: PropTypes.func.isRequired,\n  newComment: PropTypes.string.isRequired,\n  setNewComment: PropTypes.func.isRequired,\n  locationId: PropTypes.string.isRequired\n};\nexport default CommentsSection;\nvar _c;\n$RefreshReg$(_c, \"CommentsSection\");","map":{"version":3,"names":["PropTypes","jsxDEV","_jsxDEV","CommentsSection","comments","setComments","newComment","setNewComment","locationId","handleCommentSubmit","e","preventDefault","trim","response","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","commentText","ok","newCommentData","json","id","Date","now","text","username","date","toLocaleString","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","rows","placeholder","value","onChange","target","type","length","map","comment","_c","propTypes","arrayOf","shape","number","isRequired","string","func","$RefreshReg$"],"sources":["C:/Users/admin/OneDrive/Desktop/DACS_Travel_PhuYen/frontend/src/components/LocationDetail/CommentsSection.js"],"sourcesContent":["import PropTypes from \"prop-types\";\n\nconst CommentsSection = ({ comments, setComments, newComment, setNewComment, locationId }) => {\n  const handleCommentSubmit = async (e) => {\n    e.preventDefault();\n    if (newComment.trim()) {\n      try {\n        const response = await fetch(`http://localhost:5000/api/locations/${locationId}/comments`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n          body: JSON.stringify({ commentText: newComment }),\n        });\n\n        if (response.ok) {\n          const newCommentData = await response.json();\n          setComments([...comments, { \n            id: Date.now(), \n            text: newComment, \n            username: 'Bạn', // Tạm thời hiển thị \"Bạn\" cho bình luận mới\n            date: new Date().toLocaleString() \n          }]);\n          setNewComment('');\n        } else {\n          console.error('Failed to add comment');\n        }\n      } catch (error) {\n        console.error('Error submitting comment:', error);\n      }\n    }\n  };\n\n  return (\n    <section id=\"comments\" className=\"comments\">\n      <h2>Bình Luận</h2>\n      <form onSubmit={handleCommentSubmit}>\n        <textarea\n          rows=\"4\"\n          placeholder=\"Viết bình luận của bạn...\"\n          value={newComment}\n          onChange={(e) => setNewComment(e.target.value)}\n        />\n        <button type=\"submit\">Gửi Bình Luận</button>\n      </form>\n      <div className=\"comment-list\">\n        {comments.length > 0 ? (\n          comments.map((comment) => (\n            <div key={comment.id} className=\"comment\">\n              <p><strong>{comment.username}</strong>: {comment.text}</p>\n              <p>Đăng vào: {comment.date}</p>\n            </div>\n          ))\n        ) : (\n          <p>Chưa có bình luận nào. Hãy là người đầu tiên bình luận!</p>\n        )}\n      </div>\n    </section>\n  );\n};\n\nCommentsSection.propTypes = {\n  comments: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      text: PropTypes.string.isRequired,\n      username: PropTypes.string.isRequired,\n      date: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  setComments: PropTypes.func.isRequired,\n  newComment: PropTypes.string.isRequired,\n  setNewComment: PropTypes.func.isRequired,\n  locationId: PropTypes.string.isRequired,\n};\n\nexport default CommentsSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}